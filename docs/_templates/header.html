<!--
  ~ Copyright (C) 2020  Consiglio Nazionale delle Ricerche
  ~
  ~     This program is free software: you can redistribute it and/or modify
  ~     it under the terms of the GNU Affero General Public License as
  ~     published by the Free Software Foundation, either version 3 of the
  ~     License, or (at your option) any later version.
  ~
  ~     This program is distributed in the hope that it will be useful,
  ~     but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~     GNU Affero General Public License for more details.
  ~
  ~     You should have received a copy of the GNU Affero General Public License
  ~     along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->
{% if theme_repo_url %}
    {% set github_edit_url = theme_repo_url + "edit/master/docs/" + pagename %}
{% endif %}
<header class="md-header" data-md-component="header">
    <nav class="md-header-nav md-grid">
        <div class="md-flex navheader">
            <div class="md-flex__cell md-flex__cell--shrink">
                <a href="{{ pathto(master_doc) }}" title="{{ docstitle }}"
                   class="md-header-nav__button md-logo">
                    {% if theme_logo_icon|e %}
                    <i class="md-icon">{{ theme_logo_icon }}</i>
                    {% elif logo %}
                    <img src="{{ pathto('_static/' ~ logo, 1) }}" height="26"
                         alt="{{ shorttitle }} logo">
                    {% else %}
                    &nbsp;
                    {% endif %}
                </a>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
                <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch">
                <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
                    <span class="md-header-nav__topic">{{ theme_nav_title or shorttitle }}</span>
                    <span class="md-header-nav__topic"> {{ title|striptags|e }} </span>
                </div>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
                <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
                {% include "searchbox.html" %}
            </div>
            <!-- Right aligned menu below button -->
            <div class="md-flex__cell md-flex__cell--shrink">
                <button id="menu-download"
                        class="mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">more_vert</i>
                </button>
                <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
                    for="menu-download">
                    <a target="_blank" class="mdl-menu__item" href="{{pathto( 'Manuale-SIGLA.pdf', 1 )}}"><i class="material-icons icon-middle navy">picture_as_pdf</i> Scarica <b>pdf</b></a>
                    <a target="_blank" class="mdl-menu__item mdl-menu__item--full-bleed-divider" href="{{pathto( 'Manuale-SIGLA.epub', 1 )}}"><i class="material-icons icon-middle navy">cloud_download</i> Scarica <b>epub</b></a>
                    <a class="mdl-menu__item" href="{{pathto( 'CHANGELOG')}}"><i class="material-icons icon-middle navy">format_list_numbered</i> Changelog</a>
                    <a class="mdl-menu__item" href="{{ github_edit_url }}{{ page_source_suffix }}"><i class="material-icons icon-middle navy">edit</i> Modifica</a>
                </ul>
            </div>
            {% if theme_repo_url %}
            <div class="md-flex__cell md-flex__cell--shrink">
                <div class="md-header-nav__source">
                    {% include "repo.html" %}
                </div>
            </div>
            {% endif %}
        </div>
    </nav>
</header>
